/* ===================================
   深色模式 - 真正的夜间模式
   
   设计理念："深邃的夜空，星光点点"
   - 背景深邃如夜空（接近纯黑）
   - 内容如星光般点缀
   - 柔和不刺眼
   - 真正适合夜间使用
   =================================== */

/* ========== 核心变量 - 真正的深色 ========== */
[data-theme="dark"] {
  /* 主色 - 星光般的亮紫色 */
  --color-primary: #a78bfa;
  --color-primary-light: #c4b5fd;
  --color-primary-dark: #8b5cf6;
  --color-primary-gradient: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
  
  /* 背景色 - 深邃的夜空色系 */
  --color-bg-primary: #0a0a0f;      /* 最深 - 页面背景（接近纯黑的深蓝）*/
  --color-bg-secondary: #121218;    /* 次深 - 头部/导航（很深的灰蓝）*/
  --color-bg-tertiary: #1a1a24;     /* 中间 - 对话框（深灰蓝）*/
  --color-bg-elevated: #1e1e2d;     /* 最浅 - 按钮/卡片（稍浅的深色）*/
  
  /* 文字色 - 柔和的白色系 */
  --color-text-primary: #e8e8f0;    /* 主要文字 - 柔和的白色 */
  --color-text-secondary: #c1c1d0;  /* 次要文字 */
  --color-text-tertiary: #8b8b9f;   /* 辅助文字 */
  --color-text-disabled: #5a5a6e;   /* 禁用文字 */
  
  /* 边框色 - 微弱可见 */
  --color-border: #2a2a3a;          /* 默认边框 */
  --color-border-light: #232330;    /* 浅色边框 */
  --color-border-dark: #35354a;     /* 深色边框 */
  
  /* 功能色 */
  --color-success: #34d399;
  --color-error: #f87171;
  --color-warning: #fbbf24;
  --color-info: #60a5fa;
  
  /* 阴影 - 深邃的黑色阴影 */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.8);
  --shadow-base: 0 2px 8px rgba(0, 0, 0, 0.85);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.9);
  --shadow-lg: 0 8px 20px rgba(0, 0, 0, 0.92);
  --shadow-xl: 0 12px 28px rgba(0, 0, 0, 0.95);
  
  /* 星光效果 */
  --glow-primary: 0 0 20px rgba(167, 139, 250, 0.4);
  --glow-primary-strong: 0 0 30px rgba(167, 139, 250, 0.6);
}

/* ========== 页面整体 ========== */
[data-theme="dark"] body {
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
}

[data-theme="dark"] .consult-container {
  background: var(--color-bg-primary);
}

/* ========== 头部导航 - 深色 ========== */
[data-theme="dark"] .header {
  background: var(--color-bg-secondary);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);
  border-bottom: 1px solid var(--color-border);
}

[data-theme="dark"] .header-title {
  color: var(--color-text-primary);
}

[data-theme="dark"] .header-user {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .user-avatar-small {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
}

/* ========== 主内容区 ========== */
[data-theme="dark"] .main-content {
  background: transparent;
}

/* ========== 对话容器 - 深色但可区分 ========== */
[data-theme="dark"] .chat-container {
  background: var(--color-bg-secondary);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
  border: 1px solid var(--color-border);
}

/* ========== 消息气泡 - 清晰可见 ========== */
/* 机器人消息 - 深色卡片 */
[data-theme="dark"] .message.bot .message-content {
  background: var(--color-bg-tertiary);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-dark);
  box-shadow: var(--shadow-sm);
}

/* 用户消息 - 渐变紫色星光 */
[data-theme="dark"] .message.user .message-content {
  background: var(--color-primary-gradient);
  color: white;
  box-shadow: var(--glow-primary);
  border: none;
}

/* 机器人头像 - 星光紫色 */
[data-theme="dark"] .bot-avatar {
  background: var(--color-primary-gradient);
  color: white;
  box-shadow: var(--glow-primary);
  border: 2px solid rgba(167, 139, 250, 0.3);
}

/* 用户头像 */
[data-theme="dark"] .user-avatar {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
}

/* ========== 选项按钮 - 深色但文字清晰 ========== */
[data-theme="dark"] .option-btn {
  background: var(--color-bg-elevated);
  border: 2px solid var(--color-border-dark);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-sm);
}

[data-theme="dark"] .option-btn:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-primary);
  color: var(--color-primary-light);
  box-shadow: var(--glow-primary);
  transform: translateY(-2px);
}

[data-theme="dark"] .option-btn:active {
  background: var(--color-bg-elevated);
  transform: scale(0.95);
}

/* ========== 输入框 ========== */
[data-theme="dark"] .text-input {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-dark);
}

[data-theme="dark"] .text-input:focus {
  background: var(--color-bg-tertiary);
  border-color: var(--color-primary);
  box-shadow: var(--glow-primary);
}

[data-theme="dark"] .text-input::placeholder {
  color: var(--color-text-tertiary);
}

/* ========== 结果卡片 ========== */
[data-theme="dark"] .program-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-dark);
  box-shadow: var(--shadow-base);
}

[data-theme="dark"] .program-card:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-lg), var(--glow-primary);
}

[data-theme="dark"] .card-header {
  border-bottom: 1px solid var(--color-border);
  background: transparent;
}

[data-theme="dark"] .school-name {
  color: var(--color-text-primary);
}

[data-theme="dark"] .match-score {
  background: var(--color-primary-gradient);
  color: white;
  box-shadow: var(--glow-primary);
}

[data-theme="dark"] .info-item {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
}

[data-theme="dark"] .info-item .label {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .info-item .value {
  color: var(--color-text-primary);
}

[data-theme="dark"] .feature-tag {
  background: rgba(124, 58, 237, 0.2);
  color: var(--color-primary-light);
  border: 1px solid rgba(124, 58, 237, 0.4);
}

/* ========== 按钮 ========== */
[data-theme="dark"] .favorite-btn {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-dark);
}

[data-theme="dark"] .favorite-btn.favorited {
  background: rgba(251, 191, 36, 0.15);
  color: #fbbf24;
  border-color: #fbbf24;
  box-shadow: 0 0 15px rgba(251, 191, 36, 0.4);
}

[data-theme="dark"] .consult-btn {
  background: var(--color-primary-gradient);
  color: white;
  border: none;
  box-shadow: var(--glow-primary-strong);
}

[data-theme="dark"] .restart-btn {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-dark);
}

/* ========== 底部导航 - 深色 ========== */
[data-theme="dark"] .bottom-nav {
  background: var(--color-bg-secondary);
  border-top: 1px solid var(--color-border);
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.7);
}

[data-theme="dark"] .nav-label {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .nav-item.active .nav-label {
  color: var(--color-primary-light);
}

[data-theme="dark"] .nav-item.active .nav-icon {
  filter: drop-shadow(0 0 8px rgba(167, 139, 250, 0.6));
}

/* ========== 模态框 ========== */
[data-theme="dark"] .modal-overlay {
  background: rgba(0, 0, 0, 0.92);
}

[data-theme="dark"] .modal-content {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-dark);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9);
}

/* ========== 其他页面 ========== */
[data-theme="dark"] .favorites-page,
[data-theme="dark"] .history-page,
[data-theme="dark"] .profile-page {
  background: var(--color-bg-primary);
}

[data-theme="dark"] .page-header {
  background: var(--color-bg-secondary);
  border-bottom: 1px solid var(--color-border);
}

[data-theme="dark"] .favorite-card,
[data-theme="dark"] .history-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-dark);
}

[data-theme="dark"] .menu-section {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
}

[data-theme="dark"] .menu-item {
  border-bottom-color: var(--color-border);
}

[data-theme="dark"] .menu-item:hover {
  background: var(--color-bg-tertiary);
}

/* ========== 表单页面 ========== */
[data-theme="dark"] .login-page,
[data-theme="dark"] .register-page {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

[data-theme="dark"] .login-form,
[data-theme="dark"] .register-form {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-dark);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9);
}

/* ========== Profile 头部保持渐变 ========== */
[data-theme="dark"] .profile-header {
  background: var(--color-primary-gradient);
  box-shadow: 0 4px 20px rgba(124, 58, 237, 0.3);
}

/* ========== Vant 组件 ========== */
[data-theme="dark"] .van-cell {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border-bottom-color: var(--color-border);
}

[data-theme="dark"] .van-field__label {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .van-field__control {
  color: var(--color-text-primary);
  background: transparent;
}

[data-theme="dark"] .van-button--primary {
  background: var(--color-primary-gradient);
  border: none;
  box-shadow: var(--glow-primary-strong);
}

[data-theme="dark"] .van-pull-refresh {
  background: var(--color-bg-primary);
}

/* ========== 空状态 ========== */
[data-theme="dark"] .empty-state {
  color: var(--color-text-secondary);
}

/* ========== 骨架屏 ========== */
[data-theme="dark"] .skeleton {
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 0px,
    rgba(30, 30, 45, 0.8) 40px,
    var(--color-bg-tertiary) 80px
  );
}

/* ========== 滚动条 - 深色 ========== */
[data-theme="dark"] ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
  background: var(--color-bg-primary);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: var(--color-bg-elevated);
  border-radius: 4px;
  border: 2px solid var(--color-bg-primary);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-dark);
}

/* ========== 平滑过渡 ========== */
[data-theme="dark"] * {
  transition-property: background-color, color, border-color, box-shadow;
  transition-duration: 0.3s;
  transition-timing-function: ease-in-out;
}

/* 禁用某些元素的过渡 */
[data-theme="dark"] .message-content,
[data-theme="dark"] .avatar,
[data-theme="dark"] img {
  transition: none;
}